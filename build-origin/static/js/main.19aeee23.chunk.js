(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{181:function(e,t,a){},209:function(e,t,a){e.exports=a(319)},319:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"signup",(function(){return _})),a.d(n,"signout",(function(){return D})),a.d(n,"signin",(function(){return Y})),a.d(n,"clearError",(function(){return U}));var r=a(0),c=a.n(r),o=a(31),i=a.n(o),l=a(49),s=a(22),u=a(24),m=a(188),d=a(43),p=a.n(d),g=a(356),h=a(105),b={authenticated:"",errorMessage:""},f=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"auth_user":return Object(h.a)(Object(h.a)({},e),{},{authenticated:n});case"auth_error":return Object(h.a)(Object(h.a)({},e),{},{errorMessage:n});default:return e}},form:g.a}),E=a(11),v=a(14),y=a(357),x=a(115),j=a.n(x),O=(a(180),a(350)),w=Object(O.a)({container:{margin:"10%",height:"300px",boxShadow:"1px 3px 19px 3px rgb(34 36 38 / 35%)",display:"flex",flexDirection:"column",alignItems:"center"},title:{display:"flex",justifyContent:"center",padding:"20px"},des:{padding:"20px",textAlign:"center"},btn:{}}),k=function(){var e=w();return c.a.createElement("div",{className:e.container},c.a.createElement("div",{className:e.title},c.a.createElement("h1",null,"Welcome to Floating Message!")),c.a.createElement("div",{className:e.des},"Hi there! This website is for you guys to post messages. And you can also get messages from strangers randomly after signing up.",c.a.createElement("p",null),c.a.createElement("p",null),"Want more? Click the ",c.a.createElement("b",null,"INTRO")," button below."),c.a.createElement(y.a,{className:e.btn,variant:"contained",color:"primary",onClick:function(){(function(){var e=new j.a({skipButtonColor:"firebrick",mouseHover:"true",mode:"dark",isKeyboard:!0,isFocus:!1});return e.guides=[{element:"#floating-message",header:"Welcome",description:"This is Floating Message, you can control it with 'Tab' and 'Enter'"},{element:"#btn-signin",header:"Sign In",description:"You can sign in with Google account"},{element:"#btn-signup",header:"Sign Up",description:"Or you can sign up with your own account"}],e})().start()}},"INTRO"),c.a.createElement("p",null),c.a.createElement("div",null,"(Using MK-Guide)"))},N=a(20),S=a.n(N),C=a(41),M=a(19),I=a(359),F=a(361),A=a(362),P=a(355),T=a(360),G=a(353),R="https://polar-gorge-94054.herokuapp.com",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var a=Object(C.a)(S.a.mark((function a(n,r){var c,o;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.post("".concat(R,"/signup"),e);case 3:c=a.sent,o=c.data.token,n({type:"auth_user",payload:o}),n({type:"auth_error",payload:""}),localStorage.setItem("token",o),setTimeout((function(){t()}),1e3),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"auth_error",payload:"Email is in use"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},D=function(e){return function(t){localStorage.getItem("token")||e(),localStorage.removeItem("token"),t({type:"auth_user",payload:""}),t({type:"auth_error",payload:""})}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var a=Object(C.a)(S.a.mark((function a(n,r){var c,o;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.post("".concat(R,"/signin"),e);case 3:return c=a.sent,o=c.data.token&&c.data.token,n({type:"auth_user",payload:o}),localStorage.setItem("token",o),setTimeout((function(){return t()}),1e3),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(0),n({type:"auth_error",payload:"Email or password are wrong"}),a.abrupt("return",!1);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()},U=function(e){return function(e){e({type:"auth_error",payload:""})}},B=(a(181),a(352)),W=function(){return c.a.createElement(B.a,{active:!0,inline:!0})},H=Object(O.a)({login:{margin:"10px",color:"white",width:"100%",display:"flex",justifyContent:"center"},segment:{width:"70%"},btn:{marin:"0 10px "},header:{display:"flex",justifyContent:"center",padding:"20px"}}),K=Object(u.d)(Object(s.b)((function(e){return{authenticated:e.auth.authenticated,errorMessage:e.auth.errorMessage}}),n))((function(e){var t=H(),a=Object(v.b)().loginWithRedirect,n=Object(r.useState)(""),o=Object(M.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(M.a)(s,2),m=u[0],d=u[1],p=Object(r.useState)(!1),g=Object(M.a)(p,2),h=g[0],b=g[1],f=function(){var t=Object(C.a)(S.a.mark((function t(a){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearError(),n=function(){return e.history.push("/feature")},r={email:i,password:m},b(!0),t.next=6,e.signup(r,n);case 6:b(!1),a.preventDefault();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("div",{className:t.header},c.a.createElement("h2",null,"Sign up")),c.a.createElement("div",{className:t.login},c.a.createElement(F.a,{placeholder:!0,className:t.segment,id:"test"},c.a.createElement(A.a,{columns:2,relaxed:"very",stackable:!0},c.a.createElement(A.a.Column,null,c.a.createElement(P.a,{onSubmit:f},c.a.createElement(P.a.Input,{icon:"user",iconPosition:"left",label:"Email",placeholder:"Email",type:"text",value:i,onChange:function(e){return l(e.target.value)}}),c.a.createElement(P.a.Input,{icon:"lock",iconPosition:"left",label:"Password",placeholder:"Password",type:"password",value:m,onChange:function(e){return d(e.target.value)}}),c.a.createElement(T.a,{content:"Sign up",primary:!0,type:"submit"})),function(e){return e?c.a.createElement(W,null):void 0}(h),e.authenticated?c.a.createElement(I.a,{success:!0,header:"Form Completed",content:"You're all signed up for the website"}):e.errorMessage?c.a.createElement(I.a,{error:!0,header:"Action Forbidden",content:"You can only sign up for an account once with a given e-mail address."}):void 0),c.a.createElement(A.a.Column,{verticalAlign:"middle"},c.a.createElement("p",null," "),c.a.createElement(T.a,{content:"Google account",icon:"google",size:"big",onClick:a,color:"google plus"}))),c.a.createElement(G.a,{vertical:!0},"Or"))))})),L=function(e){return Object(s.b)((function(e){return{auth:e.auth.authenticated}}))((function(t){var a=Object(v.b)(),n=(a.user,a.isAuthenticated);return Object(r.useEffect)((function(){t.auth||n||t.history.push("/")}),[t.auth]),c.a.createElement(e,t)}))},q=Object(O.a)({container:{margin:"10%",height:"300px",boxShadow:"1px 3px 19px 3px rgb(34 36 38 / 35%)",display:"flex",flexDirection:"column",alignItems:"center"},title:{display:"flex",justifyContent:"center",padding:"20px"},des:{padding:"20px",textAlign:"center"},btn:{}}),z=L((function(){var e=q();return c.a.createElement("div",{className:e.container},c.a.createElement("div",{className:e.title},c.a.createElement("h1",null,"You successfully sign in!")),c.a.createElement("div",{className:e.des},"Now you have the access to all features",c.a.createElement("p",null),c.a.createElement("p",null),"Click the"," ",c.a.createElement("b",null,"FEATURE")," ","button below to see more feature"),c.a.createElement(y.a,{className:e.btn,variant:"contained",color:"primary",onClick:function(){(function(){var e=new j.a({skipButtonColor:"firebrick",mouseHover:"true",mode:"dark",isKeyboard:!0,isFocus:!1});return e.guides=[{element:"#btn-post-message",header:"Post Message",description:"Just post a message into the message flow"},{element:"#btn-get-message",header:"Get Message",description:"Get a message of a stranger randomly from the message flow, and you can click the Like button"},{element:"#btn-signout",header:"Sign Out",description:"Sign out, we will clear the token from this site"}],e})().start()}},"FEATURE"),c.a.createElement("p",null),c.a.createElement("div",null,"(Using MK-Guide)"))})),J=Object(O.a)({container:{margin:"10%",height:"300px",boxShadow:"1px 3px 19px 3px rgb(34 36 38 / 35%)",display:"flex",flexDirection:"column",alignItems:"center"},title:{display:"flex",justifyContent:"center",padding:"20px"},des:{padding:"20px",textAlign:"center"},btn:{}}),V=Object(s.b)(null,n)((function(e){var t=J(),a=function(){return e.history.push("/")},n=Object(v.b)(),o=n.logout,i=n.isAuthenticated;return Object(r.useEffect)((function(){i&&o(),e.signout(a)}),[]),c.a.createElement("div",{className:t.container},c.a.createElement("div",{className:t.title},c.a.createElement("h1",null,"You successfully sign out!")),c.a.createElement("div",{className:t.des},"And we are sorry to see you go."))})),Q=Object(O.a)({login:{margin:"10px",color:"white",width:"100%",display:"flex",justifyContent:"center"},segment:{width:"70%",boxShadow:"1px 3px 19px 3px rgb(34 36 38 / 35%) important!"},btn:{marin:"0 10px "},header:{display:"flex",justifyContent:"center",padding:"20px"}}),X=Object(u.d)(Object(s.b)((function(e){return{authenticated:e.auth.authenticated,errorMessage:e.auth.errorMessage}}),n))((function(e){var t=Q(),a=Object(v.b)().loginWithRedirect,n=Object(r.useState)(""),o=Object(M.a)(n,2),i=o[0],s=o[1],u=Object(r.useState)(""),m=Object(M.a)(u,2),d=m[0],p=m[1],g=Object(r.useState)(!1),h=Object(M.a)(g,2),b=h[0],f=h[1],E=function(){var t=Object(C.a)(S.a.mark((function t(a){var n,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearError(),n=function(){return e.history.push("/feature")},r={email:i,password:d},f(!0),t.next=6,e.signin(r,n);case 6:f(!1),a.preventDefault();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("div",{className:t.header},c.a.createElement("h2",null,"Sign in")),c.a.createElement("div",{className:t.login},c.a.createElement(F.a,{placeholder:!0,className:t.segment,id:"test"},c.a.createElement(A.a,{columns:2,relaxed:"very",stackable:!0},c.a.createElement(A.a.Column,null,c.a.createElement(P.a,{onSubmit:E},c.a.createElement(P.a.Input,{icon:"user",iconPosition:"left",label:"Email",placeholder:"Email",type:"text",value:i,onChange:function(e){return s(e.target.value)}}),c.a.createElement(P.a.Input,{icon:"lock",iconPosition:"left",label:"Password",placeholder:"Password",type:"password",value:d,onChange:function(e){return p(e.target.value)}}),c.a.createElement(T.a,{content:"Login",primary:!0,type:"submit"})),function(e){return e?c.a.createElement(W,null):void 0}(b),e.authenticated?c.a.createElement(I.a,{success:!0,header:"Form Completed",content:"You're all signed up for the website"}):e.errorMessage?c.a.createElement(I.a,{error:!0,header:"Action Forbidden",content:"Your email or password is wrong."}):void 0),c.a.createElement(A.a.Column,{verticalAlign:"middle"},c.a.createElement(l.b,{to:"/signup"},c.a.createElement(T.a,{content:"Sign up",icon:"signup",size:"big"})),c.a.createElement("p",null," "),c.a.createElement(T.a,{content:"Google account",icon:"google",size:"big",onClick:a,color:"google plus"}))),c.a.createElement(G.a,{vertical:!0},"Or"))))})),Z=Object(O.a)({container:{display:"flex",alignItems:"center",width:"100%",height:"900px",flexDirection:"column"},form:{borderRadius:"10px",width:"60%",margin:"100px",padding:"50px",background:"#f3f3f3a8",boxShadow:"6px 3px 20px 2px #0000004d"}}),$=L((function(e){var t=Z(),a=Object(r.useState)(""),n=Object(M.a)(a,2),o=n[0],i=n[1],l=Object(r.useState)(""),s=Object(M.a)(l,2),u=s[0],m=s[1],d=Object(r.useState)(""),g=Object(M.a)(d,2),h=g[0],b=g[1],f=function(){var e=Object(C.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:o,content:u},e.prev=1,e.next=4,p.a.post("".concat("https://polar-gorge-94054.herokuapp.com","/postmessage"),a);case 4:e.sent,i(""),m(""),b("successful"),t.preventDefault(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),b("error"),t.preventDefault();case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:t.container},c.a.createElement("div",{className:t.form},c.a.createElement("h4",null,"Post message"),c.a.createElement(P.a,{onSubmit:f},c.a.createElement(P.a.Input,{icon:"user",iconPosition:"left",label:"Name",placeholder:"Name",type:"text",value:o,onChange:function(e){return i(e.target.value)}}),c.a.createElement(P.a.TextArea,{label:"Message",rows:7,placeholder:"Tell us more",value:u,onChange:function(e){return m(e.target.value)}}),c.a.createElement(T.a,{content:"Submit",secondary:!0,type:"submit"})),"successful"===h?c.a.createElement(I.a,{success:!0,header:"Successfully Posted",content:"You successfully posted a message"}):"error"===h?c.a.createElement(I.a,{error:!0,header:"Action Forbidden",content:"Name and content can not be empty."}):void 0))})),ee=a(97),te=a(358),ae=a(139),ne=Object(O.a)({card:{width:"60% !important"},des:{minHeight:"100px",wordBreak:"break-word"},extra:{display:"flex",justifyContent:"space-between",alignItems:"center"},extraRight:{display:"flex",flexDirection:"row-reverse"}}),re=function(e){var t=ne(),a=e.name,n=e.content,o=e.like,i=e.time,l=e.id,s=Object(r.useState)(o),u=Object(M.a)(s,2),m=u[0],d=u[1],g=Object(r.useState)(!1),h=Object(M.a)(g,2),b=h[0],f=h[1];Object(r.useEffect)((function(){d(o)}),[e]),Object(r.useEffect)((function(){f(!1)}),[e]);var E=function(){d(m+1),f(!0),p.a.post("".concat("https://polar-gorge-94054.herokuapp.com","/like"),{id:l,like:m})};return c.a.createElement(te.a,{className:t.card},c.a.createElement(te.a.Content,{header:a}),c.a.createElement(te.a.Content,{description:n,className:t.des}),c.a.createElement(te.a.Content,{extra:!0,className:t.extra},c.a.createElement(T.a,{as:"div",labelPosition:"right"},function(e){return e?c.a.createElement(T.a,{color:"red",disabled:!0},c.a.createElement(ee.a,{name:"heart"}),"Like"):c.a.createElement(T.a,{color:"red",onClick:E},c.a.createElement(ee.a,{name:"heart"}),"Like")}(b),c.a.createElement(ae.a,{as:"a",basic:!0,color:"red",pointing:"left"},m)),c.a.createElement("div",null,c.a.createElement(ee.a,{name:"user"})," ",i)))},ce=Object(O.a)({container:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"5%"}}),oe=L((function(e){var t=ce(),a=Object(r.useState)([]),n=Object(M.a)(a,2),o=n[0],i=n[1],l=Object(r.useState)({}),s=Object(M.a)(l,2),u=s[0],m=s[1];Object(r.useEffect)((function(){(function(){var e=Object(C.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://polar-gorge-94054.herokuapp.com","/getmessage"));case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.container},c.a.createElement("h4",null,"Random Message From The Flow"),c.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){if(0!==o.length){var e=Math.floor(Math.random()*o.length),t=o.splice(e,1)[0];m(t)}}},"Get message!"),function(e){return c.a.createElement(re,{name:e.name,content:e.content,like:e.like||0,id:e._id})}(u)))})),ie=a(364),le=a(354),se=a(192),ue=a.n(se),me=Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},button:{margin:e.spacing(1),textTransform:"none"},toolbar:{background:"#f7f7f7"},aboutme:{margin:e.spacing(2)},icon:{marginRight:e.spacing(1)}}})),de=Object(s.b)((function(e){return{authenticated:e.auth.authenticated}}),n)(Object(E.e)((function(e){var t=me(),a=Object(v.b)(),n=(a.user,a.isAuthenticated),r=function(){e.clearError()},o=function(){e.history.push("/signin"),r()},i=function(){e.history.push("/signup"),r()},s=function(){e.history.push("/signout"),r()},u=function(){e.history.push("/feature"),r()},m=function(){e.history.push("/postmessage"),r()},d=function(){e.history.push("/getmessage"),r()};return c.a.createElement("div",{className:t.root},c.a.createElement(ie.a,{position:"static"},c.a.createElement(le.a,{className:t.toolbar},c.a.createElement(y.a,{className:t.menuButton,color:"inherit",id:"floating-message"},c.a.createElement(l.b,{to:"/"},"Floating message")),e.authenticated||n?c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",disabled:!0,id:"btn-signin"},"Sign In"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"secondary",disabled:!0,id:"btn-signup"},"Sign Up"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",onClick:s,id:"btn-signout"},"Sign Out"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",onClick:u,id:"btn-feature"},"Feature"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",onClick:m,id:"btn-post-message"},"Post Message"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",onClick:d,id:"btn-get-message"},"Get Message")):c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",onClick:o,id:"btn-signin"},"Sign In"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"secondary",onClick:i,id:"btn-signup"},"Sign Up"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",disabled:!0,id:"btn-signout"},"Sign Out"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",disabled:!0,id:"btn-feature"},"Feature"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",disabled:!0,id:"btn-post-message"},"Post Message"),c.a.createElement(y.a,{className:t.button,variant:"contained",color:"primary",disabled:!0,id:"btn-get-message"},"Get Message")),c.a.createElement("a",{href:"https://github.com/law-chain-hot"},c.a.createElement(y.a,{className:t.aboutme,variant:"contained"},c.a.createElement(ue.a,{className:t.icon})," About Me")))))}))),pe=function(e){e.children,e.authenticated;var t=Object(v.b)();t.user,t.isAuthenticated;return document.body.style.background="#bfbfbf12",c.a.createElement("div",null,c.a.createElement(de,null),c.a.createElement(E.a,{path:"/",exact:!0,component:k}),c.a.createElement(E.a,{path:"/signup",exact:!0,component:K}),c.a.createElement(E.a,{path:"/feature",exact:!0,component:z}),c.a.createElement(E.a,{path:"/signout",exact:!0,component:V}),c.a.createElement(E.a,{path:"/signin",exact:!0,component:X}),c.a.createElement(E.a,{path:"/postmessage",exact:!0,component:$}),c.a.createElement(E.a,{path:"/getmessage",exact:!0,component:oe}))},ge=Object(s.b)((function(e){return{authenticated:e.auth.authenticated}}))(pe),he=(a(318),{auth:{authenticated:localStorage.getItem("token")}}),be=Object(u.e)(f,he,Object(u.a)(m.a));i.a.render(c.a.createElement(v.a,{domain:"qianhao.us.auth0.com",clientId:"n7SUj53FMNjQq226jttnVYSbRYl8kIVb",redirectUri:"https://mysterious-caverns-42891.herokuapp.com"},c.a.createElement(s.a,{store:be},c.a.createElement(l.a,null,c.a.createElement(ge,null)))),document.querySelector("#root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.19aeee23.chunk.js.map